[gd_scene load_steps=3 format=3 uid="uid://dygko6sukr467"]

[ext_resource type="Script" path="res://scripts/vectorscope.gd" id="1_uuccd"]
[ext_resource type="Script" path="res://scripts/ui.gd" id="3_lpaer"]

[node name="Root" type="Node2D"]

[node name="Vectorscope" type="Node2D" parent="." node_paths=PackedStringArray("audio_player", "select_file_dialog")]
script = ExtResource("1_uuccd")
audio_player = NodePath("AudioStreamPlayer")
select_file_dialog = NodePath("FileDialog")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="Vectorscope"]

[node name="FileDialog" type="FileDialog" parent="Vectorscope"]
title = "Open a File"
position = Vector2i(9, 33)
size = Vector2i(500, 500)
ok_button_text = "Open"
dialog_hide_on_ok = true
file_mode = 0
access = 2
filters = PackedStringArray("*.wav, *.mp3", "*.wav", "*.mp3")
show_hidden_files = true
use_native_dialog = true

[node name="UI" type="Control" parent="." node_paths=PackedStringArray("vectorscope", "seek_slider")]
layout_mode = 3
anchors_preset = 0
script = ExtResource("3_lpaer")
vectorscope = NodePath("../Vectorscope")
seek_slider = NodePath("Seek/HSlider")
metadata/_edit_use_anchors_ = true

[node name="Volume" type="Control" parent="UI"]
anchors_preset = 0
offset_top = 16.0
offset_right = 40.0
offset_bottom = 56.0

[node name="Label" type="Label" parent="UI/Volume"]
layout_mode = 0
offset_top = 144.0
offset_right = 59.0
offset_bottom = 167.0
rotation = -1.57079
text = "Volume"

[node name="VSlider" type="VSlider" parent="UI/Volume"]
layout_mode = 2
offset_left = 16.0
offset_right = 40.0
offset_bottom = 144.0
tooltip_text = "Amplitude of the audio"
mouse_default_cursor_shape = 16
max_value = 1.0
step = 0.05
value = 1.0

[node name="Pan" type="Control" parent="UI"]
anchors_preset = 0
offset_left = 56.0
offset_right = 96.0
offset_bottom = 40.0

[node name="Label" type="Label" parent="UI/Pan"]
layout_mode = 0
offset_right = 59.0
offset_bottom = 23.0
text = "Pan"

[node name="HSlider" type="HSlider" parent="UI/Pan"]
layout_mode = 0
offset_top = 16.0
offset_right = 272.0
offset_bottom = 40.0
tooltip_text = "Panning of the stereo audio from left to right and inbetween"
mouse_default_cursor_shape = 16
min_value = -1.0
max_value = 1.0
step = 0.1

[node name="Speed" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 0
offset_left = 56.0
offset_top = 64.0
offset_right = 96.0
offset_bottom = 104.0

[node name="Label" type="Label" parent="UI/Speed"]
layout_mode = 0
offset_right = 59.0
offset_bottom = 23.0
text = "Speed / Pitch
"

[node name="HSlider" type="HSlider" parent="UI/Speed"]
layout_mode = 0
offset_top = 16.0
offset_right = 272.0
offset_bottom = 40.0
tooltip_text = "Multiplier for the song speed and pitch"
mouse_default_cursor_shape = 16
max_value = 4.0
step = 0.25
value = 1.0

[node name="Penalty" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 0
offset_left = 56.0
offset_top = 128.0
offset_right = 96.0
offset_bottom = 168.0

[node name="Label" type="Label" parent="UI/Penalty"]
layout_mode = 0
offset_right = 59.0
offset_bottom = 23.0
text = "Penalty"

[node name="HSlider" type="HSlider" parent="UI/Penalty"]
layout_mode = 0
offset_top = 16.0
offset_right = 272.0
offset_bottom = 40.0
tooltip_text = "Factor that scales the darkness of a line based on its length"
mouse_default_cursor_shape = 16
value = 25.0

[node name="BufferSize" type="Control" parent="UI"]
visible = false
anchors_preset = 0
offset_left = 56.0
offset_top = 192.0
offset_right = 96.0
offset_bottom = 232.0

[node name="Label" type="Label" parent="UI/BufferSize"]
layout_mode = 0
offset_right = 83.0
offset_bottom = 23.0
text = "Buffer Size
"

[node name="HSlider" type="HSlider" parent="UI/BufferSize"]
layout_mode = 0
offset_top = 16.0
offset_right = 272.0
offset_bottom = 40.0
tooltip_text = "Buffer Size"
mouse_default_cursor_shape = 16

[node name="Seek" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="HSlider" type="HSlider" parent="UI/Seek"]
layout_mode = 2
anchor_top = 0.5
anchor_bottom = 0.5
offset_top = 612.0
offset_right = 1152.0
offset_bottom = 628.0
mouse_default_cursor_shape = 2
max_value = 1.0
step = 0.001
scrollable = false
metadata/_edit_use_anchors_ = true

[connection signal="value_changed" from="UI/Volume/VSlider" to="UI" method="_on_volume_value_changed"]
[connection signal="value_changed" from="UI/Pan/HSlider" to="UI" method="_on_pan_value_changed"]
[connection signal="value_changed" from="UI/Speed/HSlider" to="UI" method="_on_speed_value_changed"]
[connection signal="value_changed" from="UI/Penalty/HSlider" to="UI" method="_on_penalty_value_changed"]
[connection signal="drag_ended" from="UI/Seek/HSlider" to="UI" method="_on_seek_drag_ended"]
[connection signal="drag_started" from="UI/Seek/HSlider" to="UI" method="_on_seek_drag_started"]
